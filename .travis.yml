language: groovy
os: linux
dist: bionic
arch: amd64 
sudo: required
services: docker

on: [push, pull_request]

install:
    - echo "Installing Nextflow"
    - wget -qO- https://get.nextflow.io | bash
    - sudo mv nextflow /usr/local/bin
    
scripts:                
    - nextflow run main.nf -profile test,docker --fastp_min_base_quality 15 --fastp_max_percent_low_qual_base 40 --travis 'true'
    - nextflow run main.nf -profile test,singularity --fastp_min_base_quality 15 --fastp_max_percent_low_qual_base 40 --travis 'true'

after_success:
    - echo "CI build of variantcalling pipeline succeeded"

after_failure: 
    - echo "CI build of variantcalling pipeline failed"


